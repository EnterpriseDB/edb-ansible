---
- name: Check Operating System,  PostgreSQL Type, PostgreSQL Version
  ansible.builtin.include_role:
    name: common
    tasks_from: check_version.yml

- name: Get facts on current container
  community.docker.current_container_facts:

- name: Include the tuned package installation tasks
  include_tasks: install_tuned.yml
  when: not ansible_module_running_in_container

- name: Include tuned setting up tasks
  include_tasks: setup_tuned.yml
  when: not ansible_module_running_in_container

- name: Include Postgres tuning tasks
  include_tasks: tune_postgres.yml
