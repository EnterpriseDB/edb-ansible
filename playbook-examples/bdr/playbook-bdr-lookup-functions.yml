- name: BDR lookup functions
  hosts: localhost
  gather_facts: false
  any_errors_fatal: true
  collections:
    - edb_devops.edb_postgres

  tasks:
    - name: Store result of PGD lookup information
      ansible.builtin.set_fact:
        pgd_nodes: "{{ lookup('edb_devops.edb_postgres.pgd_nodes', 'PGD_DC1', wantList=True) }}"

    - name: Print nodes of site PGD_DC1
      ansible.builtin.debug:
        msg: "{{ pgd_nodes }}"

    - name: Print leader of primaries of site PGD_DC1
      ansible.builtin.debug:
        msg: "{{ lookup('edb_devops.edb_postgres.pgd_lead_primary', 'PGD_DC1', wantList=True) }}"
